import{d as j,r,S as q,e as V,f as G,k as l,w as t,ad as s,v as u,t as H,F as J,l as K,aE as O,av as m,p as b,a as P}from"./index-b7rX0FG_.js";const Q={class:"config-list"},R={class:"toolbar"},Y=j({__name:"AdminTag",setup(W){const C=r([]),_=r([]),i=r(!1),p=r(!1),v=r(""),d=r({id:0,name:"",classify:0}),k=o=>{const e=_.value.find(n=>n.id===o);return(e==null?void 0:e.name)||"未知"},f=async()=>{},x=async()=>{},w=()=>{var o;v.value="新增标签",d.value={id:0,name:"",classify:((o=_.value[0])==null?void 0:o.id)||0},i.value=!0},E=o=>{v.value="编辑标签",d.value={...o},i.value=!0},B=o=>{O.confirm(`确定删除标签 "${o.name}"?`,"提示",{type:"warning"}).then(async()=>{try{m.success("删除成功"),f()}catch{m.error("删除失败")}})},T=()=>{p.value=!0},I=async()=>{},N=o=>!0,U=()=>{m.success("导入成功"),p.value=!1,f()},$=async()=>{try{d.value.id?m.success("更新成功"):m.success("创建成功"),i.value=!1,f()}catch{m.error("操作失败")}};return q(()=>{f(),x()}),(o,e)=>{const n=s("el-button"),c=s("el-table-column"),D=s("el-table"),F=s("el-input"),y=s("el-form-item"),M=s("el-option"),S=s("el-select"),z=s("el-form"),g=s("el-dialog"),A=s("el-upload");return b(),V("div",Q,[G("div",R,[l(n,{type:"primary",onClick:w},{default:t(()=>e[5]||(e[5]=[u("新增标签")])),_:1}),l(n,{onClick:T},{default:t(()=>e[6]||(e[6]=[u("导入")])),_:1}),l(n,{onClick:I},{default:t(()=>e[7]||(e[7]=[u("导出")])),_:1})]),l(D,{data:C.value,border:"",style:{width:"100%","margin-top":"20px"}},{default:t(()=>[l(c,{prop:"id",label:"ID",width:"80"}),l(c,{prop:"name",label:"标签名"}),l(c,{prop:"classify",label:"分类"},{default:t(({row:a})=>[u(H(k(a.classify)),1)]),_:1}),l(c,{label:"操作",width:"180"},{default:t(({row:a})=>[l(n,{size:"small",onClick:L=>E(a)},{default:t(()=>e[8]||(e[8]=[u("编辑")])),_:2},1032,["onClick"]),l(n,{size:"small",type:"danger",onClick:L=>B(a)},{default:t(()=>e[9]||(e[9]=[u(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(g,{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=a=>i.value=a),title:v.value},{footer:t(()=>[l(n,{onClick:e[2]||(e[2]=a=>i.value=!1)},{default:t(()=>e[10]||(e[10]=[u("取消")])),_:1}),l(n,{type:"primary",onClick:$},{default:t(()=>e[11]||(e[11]=[u("确认")])),_:1})]),default:t(()=>[l(z,{model:d.value,"label-width":"100px"},{default:t(()=>[l(y,{label:"标签名"},{default:t(()=>[l(F,{modelValue:d.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value.name=a)},null,8,["modelValue"])]),_:1}),l(y,{label:"分类"},{default:t(()=>[l(S,{modelValue:d.value.classify,"onUpdate:modelValue":e[1]||(e[1]=a=>d.value.classify=a)},{default:t(()=>[(b(!0),V(J,null,K(_.value,a=>(b(),P(M,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(g,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=a=>p.value=a),title:"导入配置"},{default:t(()=>[l(A,{action:"/api/config/import","before-upload":N,"on-success":U,"show-file-list":!1},{default:t(()=>[l(n,{type:"primary"},{default:t(()=>e[12]||(e[12]=[u("点击上传")])),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{Y as default};

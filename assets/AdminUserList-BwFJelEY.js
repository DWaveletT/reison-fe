import{d as F,r as s,S as Q,e as G,f as H,m as J,k as l,w as t,ad as o,aD as O,o as R,a as W,v as u,t as k,b as X,aq as Y,aE as Z,p as x,_ as ee}from"./index-b7rX0FG_.js";const le={class:"user-list"},ae={class:"toolbar"},te=F({__name:"AdminUserList",setup(oe){const w=s([]),c=s(!1),_=s(1),b=s(20),U=s(0),y=s(""),p=s(!1),C=s(""),r=s({id:0,name:"",role:2,avatar:""}),z=n=>["管理员","裁判","用户"][n]||"未知",D=n=>["danger","warning",""][n]||"",m=async()=>{c.value=!0,c.value=!1},v=()=>{_.value=1,m()},S=()=>{C.value="新增用户",r.value={id:0,name:"",role:2,avatar:""},p.value=!0},E=n=>{},B=n=>{Z.confirm(`确定删除用户 "${n.name}"?`,"提示",{type:"warning"}).then(async()=>{})},T=n=>{r.value.avatar=n.url},M=async()=>{};return Q(()=>{m()}),(n,e)=>{const i=o("el-button"),V=o("el-input"),d=o("el-table-column"),$=o("el-tag"),A=o("el-table"),N=o("el-pagination"),f=o("el-form-item"),g=o("el-option"),h=o("el-select"),I=o("el-avatar"),K=o("el-upload"),L=o("el-form"),P=o("el-dialog"),j=R("loading");return x(),G("div",le,[H("div",ae,[l(i,{type:"primary",onClick:S},{default:t(()=>e[7]||(e[7]=[u("新增用户")])),_:1}),l(V,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=a=>y.value=a),placeholder:"搜索用户",style:{width:"300px","margin-left":"10px"},clearable:"",onClear:v,onKeyup:O(v,["enter"])},{append:t(()=>[l(i,{icon:"search",onClick:v})]),_:1},8,["modelValue"])]),J((x(),W(A,{data:w.value,border:"",style:{width:"100%","margin-top":"20px"}},{default:t(()=>[l(d,{prop:"id",label:"ID",width:"80"}),l(d,{prop:"name",label:"用户名"}),l(d,{prop:"role",label:"角色"},{default:t(({row:a})=>[l($,{type:D(a.role)},{default:t(()=>[u(k(z(a.role)),1)]),_:2},1032,["type"])]),_:1}),l(d,{prop:"register",label:"注册时间"},{default:t(({row:a})=>[u(k(X(Y)(a.register)),1)]),_:1}),l(d,{label:"操作",width:"180"},{default:t(({row:a})=>[l(i,{size:"small",onClick:q=>E(a)},{default:t(()=>e[8]||(e[8]=[u("编辑")])),_:2},1032,["onClick"]),l(i,{size:"small",type:"danger",onClick:q=>B(a)},{default:t(()=>e[9]||(e[9]=[u(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[j,c.value]]),l(N,{"current-page":_.value,"onUpdate:currentPage":e[1]||(e[1]=a=>_.value=a),"page-size":b.value,"onUpdate:pageSize":e[2]||(e[2]=a=>b.value=a),total:U.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:m,onCurrentChange:m},null,8,["current-page","page-size","total"]),l(P,{modelValue:p.value,"onUpdate:modelValue":e[6]||(e[6]=a=>p.value=a),title:C.value},{footer:t(()=>[l(i,{onClick:e[5]||(e[5]=a=>p.value=!1)},{default:t(()=>e[10]||(e[10]=[u("取消")])),_:1}),l(i,{type:"primary",onClick:M},{default:t(()=>e[11]||(e[11]=[u("确认")])),_:1})]),default:t(()=>[l(L,{model:r.value,"label-width":"100px"},{default:t(()=>[l(f,{label:"用户名"},{default:t(()=>[l(V,{modelValue:r.value.name,"onUpdate:modelValue":e[3]||(e[3]=a=>r.value.name=a)},null,8,["modelValue"])]),_:1}),l(f,{label:"角色"},{default:t(()=>[l(h,{modelValue:r.value.role,"onUpdate:modelValue":e[4]||(e[4]=a=>r.value.role=a)},{default:t(()=>[l(g,{label:"管理员",value:0}),l(g,{label:"裁判",value:1}),l(g,{label:"用户",value:2})]),_:1},8,["modelValue"])]),_:1}),l(f,{label:"头像"},{default:t(()=>[l(K,{action:"/api/upload","show-file-list":!1,"on-success":T},{default:t(()=>[l(I,{src:r.value.avatar},null,8,["src"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),re=ee(te,[["__scopeId","data-v-1383afc2"]]);export{re as default};

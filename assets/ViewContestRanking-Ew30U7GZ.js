import{d as S,R as x,c as E,r as C,S as V,T,e as r,a as j,f as s,F as d,l as p,b as f,n as I,ax as M,ad as P,p as l,k as v,w as m,v as b,t as c,j as A,$ as F,_ as w,aj as O,ay as z,L as D,E as K}from"./index-Dqx7opL-.js";const q={class:"ranklist-container"},G={key:0,class:"ranklist"},H={class:"colgroup"},J={class:"headline entry"},Q={class:"rank"},U={class:"name"},W={class:"score-solved"},X={class:"score-penalty"},Y=S({__name:"RankList",setup(g){const k=x(),n=E(()=>k.currentContest),a=E(()=>n.value?Object.keys(n.value.problems):[]),y=C([]),R=C(!1);function $(){n.value&&(R.value=!0,M({contest:n.value.id}).then(o=>{y.value=o.rankings,N()}).finally(()=>{R.value=!1}))}V(()=>{$()}),T(n,$);const _=C([]);function B(o,t){const u=o.results[t];return u?u.judge==="correct"?"solved":"attempted":""}function L(o){return o<=1?`${o} try`:`${o} tries`}function N(){if(n.value){_.value=[];for(const o of y.value){const t={rank:o.rank,user:o.user,totalPenalty:0,totalSolved:0,results:{}};for(const u of o.results)for(const e of a.value)if(n.value.problems[e]===u.problem){t.results[e]=u,u.judge==="correct"&&(t.totalPenalty+=u.penalty,t.totalSolved++);break}_.value.push(t)}}}return(o,t)=>{const u=P("router-link");return l(),r("div",q,[n.value?(l(),r("table",G,[s("colgroup",H,[t[0]||(t[0]=s("col",{class:"col-rank"},null,-1)),t[1]||(t[1]=s("col",{class:"col-name"},null,-1)),t[2]||(t[2]=s("col",{class:"col-score-solved"},null,-1)),t[3]||(t[3]=s("col",{class:"col-score-penalty"},null,-1)),(l(!0),r(d,null,p(a.value,e=>(l(),r("col",{class:"col-problem",key:e}))),128)),t[4]||(t[4]=s("col",{class:"col-empty"},null,-1))]),s("thead",null,[s("tr",J,[t[5]||(t[5]=s("th",{class:"rank"},"RANK",-1)),t[6]||(t[6]=s("th",{class:"name"},"TEAM",-1)),t[7]||(t[7]=s("th",{class:"score",colspan:"2"},"SCORE",-1)),(l(!0),r(d,null,p(a.value,e=>(l(),r("th",{class:"problem-cell",key:e},[v(u,{class:"problem",to:`/contest/${n.value.id}/problem/${n.value.problems[e]}`},{default:m(()=>[b(c(e),1)]),_:2},1032,["to"])]))),128)),t[8]||(t[8]=s("th",null,null,-1))])]),s("tbody",null,[(l(!0),r(d,null,p(_.value,e=>(l(),r("tr",{class:"normal-line entry",key:e.rank},[s("td",Q,c(e.rank),1),s("td",U,c(e.user),1),s("td",W,c(e.totalSolved),1),s("td",X,c(e.totalPenalty),1),(l(!0),r(d,null,p(a.value,i=>(l(),r("td",{class:"result-cell",key:i},[e.results[i]?(l(),r("div",{key:0,class:F(["result",B(e,i)])},[b(c(e.results[i].penalty)+" ",1),s("span",null,c(L(e.results[i].attempt)),1)],2)):A("",!0)]))),128)),t[9]||(t[9]=s("td",null,null,-1))]))),128))])])):(l(),j(f(I),{key:1,description:"暂无排行"}))])}}}),Z=w(Y,[["__scopeId","data-v-e720a747"]]),h={class:"button-container"},tt=S({__name:"ViewContestRanking",props:{cid_str:{}},setup(g){const k=g;return V(()=>{x().enter(parseInt(k.cid_str))}),(n,a)=>(l(),j(O,null,{default:m(()=>[s("div",h,[v(f(D),{type:"primary",class:"back-button",onClick:a[0]||(a[0]=y=>f(z).push(`/contest/${n.cid_str}`))},{default:m(()=>a[1]||(a[1]=[b(" 返回比赛 ")])),_:1})]),v(f(K),{class:"ranklist-card"},{default:m(()=>[v(Z)]),_:1})]),_:1}))}}),et=w(tt,[["__scopeId","data-v-112fec38"]]);export{et as default};

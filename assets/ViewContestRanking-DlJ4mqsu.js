import{d as S,P as V,c as $,r as C,O as x,Q as M,a as r,l as B,b as s,F as d,k as p,e as f,E as P,ab as I,a3 as O,o as l,j as v,n as m,q as b,t as c,i as T,ac as A,_ as N,aa as F,ad as K,K as q,M as z}from"./index-m04lDvHM.js";const D={class:"ranklist-container"},Q={key:0,class:"ranklist"},G={class:"colgroup"},H={class:"headline entry"},J={class:"rank"},U={class:"name"},W={class:"score-solved"},X={class:"score-penalty"},Y=S({__name:"RankList",setup(g){const k=V(),n=$(()=>k.currentContest),a=$(()=>n.value?Object.keys(n.value.problems):[]),y=C([]),R=C(!1);function E(){n.value&&(R.value=!0,I({contest:n.value.id}).then(o=>{y.value=o.rankings,L()}).finally(()=>{R.value=!1}))}x(()=>{E()}),M(n,E);const _=C([]);function j(o,t){const u=o.results[t];return u?u.judge==="correct"?"solved":"attempted":""}function w(o){return o<=1?`${o} try`:`${o} tries`}function L(){if(n.value){_.value=[];for(const o of y.value){const t={rank:o.rank,user:o.user,totalPenalty:0,totalSolved:0,results:{}};for(const u of o.results)for(const e of a.value)if(n.value.problems[e]===u.problem){t.results[e]=u,u.judge==="correct"&&(t.totalPenalty+=u.penalty,t.totalSolved++);break}_.value.push(t)}}}return(o,t)=>{const u=O("router-link");return l(),r("div",D,[n.value?(l(),r("table",Q,[s("colgroup",G,[t[0]||(t[0]=s("col",{class:"col-rank"},null,-1)),t[1]||(t[1]=s("col",{class:"col-name"},null,-1)),t[2]||(t[2]=s("col",{class:"col-score-solved"},null,-1)),t[3]||(t[3]=s("col",{class:"col-score-penalty"},null,-1)),(l(!0),r(d,null,p(a.value,e=>(l(),r("col",{class:"col-problem",key:e}))),128)),t[4]||(t[4]=s("col",{class:"col-empty"},null,-1))]),s("thead",null,[s("tr",H,[t[5]||(t[5]=s("th",{class:"rank"},"RANK",-1)),t[6]||(t[6]=s("th",{class:"name"},"TEAM",-1)),t[7]||(t[7]=s("th",{class:"score",colspan:"2"},"SCORE",-1)),(l(!0),r(d,null,p(a.value,e=>(l(),r("th",{class:"problem-cell",key:e},[v(u,{class:"problem",to:`/contest/${n.value.id}/problem/${n.value.problems[e]}`},{default:m(()=>[b(c(e),1)]),_:2},1032,["to"])]))),128)),t[8]||(t[8]=s("th",null,null,-1))])]),s("tbody",null,[(l(!0),r(d,null,p(_.value,e=>(l(),r("tr",{class:"normal-line entry",key:e.rank},[s("td",J,c(e.rank),1),s("td",U,c(e.user),1),s("td",W,c(e.totalSolved),1),s("td",X,c(e.totalPenalty),1),(l(!0),r(d,null,p(a.value,i=>(l(),r("td",{class:"result-cell",key:i},[e.results[i]?(l(),r("div",{key:0,class:A(["result",j(e,i)])},[b(c(e.results[i].penalty)+" ",1),s("span",null,c(w(e.results[i].attempt)),1)],2)):T("",!0)]))),128)),t[9]||(t[9]=s("td",null,null,-1))]))),128))])])):(l(),B(f(P),{key:1,description:"暂无排行"}))])}}}),Z=N(Y,[["__scopeId","data-v-e720a747"]]),h={class:"button-container"},tt=S({__name:"ViewContestRanking",props:{cid_str:{}},setup(g){const k=g;return x(()=>{V().enter(parseInt(k.cid_str))}),(n,a)=>(l(),B(F,null,{default:m(()=>[s("div",h,[v(f(q),{type:"primary",class:"back-button",onClick:a[0]||(a[0]=y=>f(K).push(`/contest/${n.cid_str}`))},{default:m(()=>a[1]||(a[1]=[b(" 返回比赛 ")])),_:1})]),v(f(z),{class:"ranklist-card"},{default:m(()=>[v(Z)]),_:1})]),_:1}))}}),et=N(tt,[["__scopeId","data-v-112fec38"]]);export{et as default};

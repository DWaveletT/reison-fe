import{d as I,u as N,r as h,c as L,a as v,b as e,E as R,w as r,e as d,f as o,t as _,g as G,h as H,i as J,j as b,k as n,F as P,l as U,m as q,n as K,o as z,p as s,q as Q,s as M,v as y,x as O,y as $,z as D,A as F,_ as B,B as Y,C as W,D as X,G as Z,H as x,I as S,J as ee,K as le,L as w,M as te,N as oe,O as T,P as se,Q as ae,R as ne,S as ie,T as re,U as ue,V as de}from"./index-Dqx7opL-.js";import{_ as E,C as pe}from"./ContestSidebar-BVEBwX6S.js";import"./markdown-CFCF6NjP.js";const me={class:"problem-header"},ce={class:"problem-title"},be={class:"problem-meta"},ve={class:"time-limit"},fe={class:"memory-limit"},_e={class:"problem-type"},ye={class:"problem-content"},ge={key:0,class:"problem-section"},ke={key:1,class:"problem-section"},Ce={key:2,class:"problem-section"},Ve={key:3,class:"problem-section"},$e={key:4,class:"problem-section"},he=["onClick"],we={key:0},Ee=["onClick"],Pe={key:0},Ie={key:5,class:"problem-section"},Se={key:0,style:{height:"200px"}},Be=I({__name:"ProblemContent",props:{problem:{},loading:{type:Boolean}},setup(g){const p=g,a=N();function t(){if(p.problem!==null){const u=Object.keys(p.problem.statements);if(u.length!==0&&!(a.userLang in u))return u[0]}return a.userLang}const c=h(t()),l=L(()=>{var u;return(u=p.problem)==null?void 0:u.statements[c.value]}),i=L(()=>{var u;return((u=p.problem)==null?void 0:u.title[c.value])||"暂无题面"}),f=h(0),k=async(u,m)=>{await navigator.clipboard.writeText(m),f.value=u,setTimeout(()=>{f.value==u&&(f.value=0)},1e3)};return(u,m)=>{const j=z("loading");return s(),v(e(R),{class:"problem-container"},{default:r(()=>[u.problem&&l.value?(s(),d(P,{key:0},[o("div",me,[o("h1",ce,_(i.value||"暂无数据"),1),o("div",be,[o("span",ve,"时间限制: "+_(e(G)(u.problem.limitTime)),1),o("span",fe,"内存限制: "+_(e(H)(u.problem.limitMemory)),1),o("span",_e,_(e(J)(u.problem.type)),1)])]),o("div",ye,[l.value.background?(s(),d("div",ge,[m[0]||(m[0]=o("h2",{class:"section-title"},"题目背景",-1)),n(E,{content:l.value.background},null,8,["content"])])):b("",!0),l.value.legend?(s(),d("div",ke,[m[1]||(m[1]=o("h2",{class:"section-title"},"题目描述",-1)),n(E,{content:l.value.legend},null,8,["content"])])):b("",!0),l.value.formatI?(s(),d("div",Ce,[m[2]||(m[2]=o("h2",{class:"section-title"},"输入格式",-1)),n(E,{content:l.value.formatI},null,8,["content"])])):b("",!0),l.value.formatO?(s(),d("div",Ve,[m[3]||(m[3]=o("h2",{class:"section-title"},"输出格式",-1)),n(E,{content:l.value.formatO},null,8,["content"])])):b("",!0),l.value.examples&&l.value.examples.length>0?(s(),d("div",$e,[m[4]||(m[4]=o("h2",{class:"section-title"},"样例",-1)),(s(!0),d(P,null,U(l.value.examples,(V,C)=>(s(),d("div",{key:C,class:"example"},[n(e(Q),{gutter:8},{default:r(()=>[n(e(M),{span:12,class:"data"},{default:r(()=>[o("h3",null,[y(" 输入 #"+_(C+1)+" ",1),o("a",{href:"#",onClick:O(A=>k(C+1,V.dataI||""),["prevent"]),class:"copy-link"},[f.value!=C+1?(s(),v(e($),{key:0,icon:e(D)},null,8,["icon"])):(s(),v(e($),{key:1,icon:e(F)},null,8,["icon"]))],8,he)]),V.dataI?(s(),d("pre",we,_(V.dataI),1)):b("",!0)]),_:2},1024),n(e(M),{span:12,class:"data"},{default:r(()=>[o("h3",null,[y(" 输出 #"+_(C+1)+" ",1),o("a",{href:"#",onClick:O(A=>k(-C-1,V.dataO||""),["prevent"]),class:"copy-link"},[f.value!=-C-1?(s(),v(e($),{key:0,icon:e(D)},null,8,["icon"])):(s(),v(e($),{key:1,icon:e(F)},null,8,["icon"]))],8,Ee)]),V.dataO?(s(),d("pre",Pe,_(V.dataO),1)):b("",!0)]),_:2},1024)]),_:2},1024)]))),128))])):b("",!0),l.value.hint?(s(),d("div",Ie,[m[5]||(m[5]=o("h2",{class:"section-title"},"提示",-1)),n(E,{content:l.value.hint},null,8,["content"])])):b("",!0)])],64)):(s(),d(P,{key:1},[u.loading?q((s(),d("div",Se,null,512)),[[j,!0]]):(s(),v(e(K),{key:1,description:"暂无题面"}))],64))]),_:1})}}}),Te=B(Be,[["__scopeId","data-v-2b7d18f1"]]),Le={class:"dialog-footer"},Me=I({__name:"ProblemSubmit",props:Y({problem:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const{codeLangs:p}=N().config,a=W(g,"modelValue"),t=X({lang:"",code:"",id:0});return(c,l)=>(s(),v(e(Z),{modelValue:a.value,"onUpdate:modelValue":l[4]||(l[4]=i=>a.value=i),title:"提交代码",width:"800"},{footer:r(()=>[o("div",Le,[n(e(w),{onClick:l[2]||(l[2]=i=>a.value=!1)},{default:r(()=>l[6]||(l[6]=[y("取消")])),_:1}),n(e(w),{type:"primary",onClick:l[3]||(l[3]=i=>a.value=!1)},{default:r(()=>l[7]||(l[7]=[y("提交")])),_:1})])]),default:r(()=>[n(e(x),{model:t,"label-width":"auto"},{default:r(()=>[n(e(S),{label:"语言"},{default:r(()=>[n(e(ee),{modelValue:t.lang,"onUpdate:modelValue":l[0]||(l[0]=i=>t.lang=i),class:"input-lang",placeholder:"Language",size:"large"},{default:r(()=>[(s(!0),d(P,null,U(e(p),i=>(s(),v(e(te),{key:i.id,label:i.description,value:i.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(e(S),{label:"代码"},{default:r(()=>[n(e(le),{modelValue:t.code,"onUpdate:modelValue":l[1]||(l[1]=i=>t.code=i),autosize:{minRows:10,maxRows:15},class:"input-code",type:"textarea",placeholder:"Your code here..."},null,8,["modelValue"])]),_:1}),n(e(S),{label:"或者"},{default:r(()=>[n(e(w),{type:"primary"},{default:r(()=>l[5]||(l[5]=[y("上传代码")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]))}}),Oe={class:"panel-container"},De={key:0,class:"description-list"},Fe={class:"description-item"},Ne={class:"item-value"},Re={class:"description-item"},Ue={class:"item-value"},qe={key:1,style:{height:"128px"}},ze=I({__name:"ProblemPanel",props:{problem:{},result:{},edit:{type:Boolean,default:!1},loading:{type:Boolean}},setup(g){T();const p=h(!1);return(a,t)=>{const c=z("loading");return s(),d(P,null,[o("div",Oe,[n(e(R),null,{default:r(()=>[t[6]||(t[6]=o("h3",{class:"info-title"},"题目信息",-1)),a.problem?(s(),d("div",De,[o("div",Fe,[t[2]||(t[2]=o("span",{class:"item-label"},"编号",-1)),o("span",Ne,_(a.problem.id),1)]),o("div",Re,[t[3]||(t[3]=o("span",{class:"item-label"},"难度",-1)),o("span",Ue,_(a.problem.difficulty),1)]),t[4]||(t[4]=o("div",{class:"description-item"},[o("span",{class:"item-label"},"标签"),o("span",{class:"item-value"},"没写")],-1)),t[5]||(t[5]=o("div",{class:"description-item"},[o("span",{class:"item-label"},"来源"),o("span",{class:"item-value"},"没有")],-1))])):q((s(),d("div",qe,null,512)),[[c,a.loading]])]),_:1}),n(e(w),{type:"primary",disabled:!a.problem,onClick:t[0]||(t[0]=l=>p.value=!0)},{default:r(()=>t[7]||(t[7]=[y("提交")])),_:1},8,["disabled"]),n(e(oe),{fill:"","fill-ratio":40},{default:r(()=>[n(e(w),{plain:""},{default:r(()=>t[8]||(t[8]=[y("全部记录")])),_:1}),n(e(w),{plain:""},{default:r(()=>t[9]||(t[9]=[y("我的记录")])),_:1})]),_:1})]),a.problem?(s(),v(Me,{key:0,problem:a.problem,modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=l=>p.value=l)},null,8,["problem","modelValue"])):b("",!0)],64)}}}),je=B(ze,[["__scopeId","data-v-b67711ba"]]),Ae={key:0,class:"toolbar"},Ge=I({__name:"ProblemToolbar",props:{problem:{},loading:{type:Boolean}},setup(g){const p=T();return(a,t)=>a.loading?b("",!0):(s(),d("div",Ae,[a.problem?(s(),v(e($),{key:0,icon:e(se),class:"tool-icon"},null,8,["icon"])):b("",!0),a.problem?(s(),v(e($),{key:1,icon:e(ae),class:"tool-icon",onClick:t[0]||(t[0]=c=>e(p).push(`/problem/${a.problem.id}/edit`))},null,8,["icon"])):b("",!0)]))}}),He=B(Ge,[["__scopeId","data-v-449d22aa"]]),Ye=I({__name:"ViewProblemDetail",props:{pid:{},plabel:{},cid_str:{}},setup(g){T();const p=ne(),a=h(null),t=h(null),c=h(!1);async function l(){a.value=null,c.value=!0;let f="";i.cid_str&&i.plabel?await p.enter(parseInt(i.cid_str)).then(()=>{f=p.currentContest.problems[i.plabel]}):i.pid&&(f=i.pid),f?await de({problem:f}).then(k=>{a.value=k.problem,k.result&&(t.value=k.result)}).finally(()=>{c.value=!1}):c.value=!1}const i=g;return ie(()=>{l()}),re(i,()=>l()),(f,k)=>(s(),v(ue,null,{main:r(()=>[n(He,{loading:c.value,problem:a.value},null,8,["loading","problem"]),n(Te,{loading:c.value,problem:a.value},null,8,["loading","problem"])]),sidebar:r(()=>[n(pe),n(je,{loading:c.value,problem:a.value,result:t.value},null,8,["loading","problem","result"])]),_:1}))}});export{Ye as default};

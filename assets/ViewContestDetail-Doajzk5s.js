import{d as T,c as m,P as $,l as v,e as u,E,o as e,r as x,O as S,a as c,b as s,F as g,k as L,w as P,ae as O,a3 as D,m as N,i as U,q as V,t as h,j as o,n as i,Z as j,_ as R,a9 as F,R as I,T as M,U as C,M as q,a0 as z}from"./index-DAcFLkXI.js";import{_ as A,C as Z}from"./ContestSidebar-pRrGaH3j.js";const G=T({__name:"ContestOverview",setup(b){const t=m(()=>$().currentContest);return(n,r)=>t.value?(e(),v(A,{key:0,content:t.value.description},null,8,["content"])):(e(),v(u(E),{key:1,description:"比赛不存在"}))}}),H={key:0,class:"problemset"},J={class:"label"},K={class:"title"},Q={class:"acceptance"},W={class:"accept-number"},X={class:"acceptance-bar-container"},Y={key:0,style:{height:"200px"}},ee=T({__name:"ContestProblems",setup(b){const t=$(),n=m(()=>t.currentContest);m(()=>t.currentRanking);const r=x([]),f=x(!1);function k(){n.value&&(f.value=!0,r.value=[],O({contest:n.value.id}).then(_=>{for(const l of _.problems)r.value.push({problem:l,label:w(l.id)})}).finally(()=>{f.value=!1}))}function w(_){if(!n.value)return null;const l=Object.keys(n.value.problems);for(const d of l)if(n.value.problems[d]===_)return d;return null}return S(()=>{k()}),(_,l)=>{const d=D("router-link"),p=N("loading");return n.value&&r.value.length>0?(e(),c("table",H,[l[0]||(l[0]=s("colgroup",null,[s("col",{class:"col-label"}),s("col",{class:"col-title"}),s("col",{class:"col-acceptance"})],-1)),s("tbody",null,[(e(!0),c(g,null,L(r.value,({problem:a,label:y})=>(e(),c("tr",{class:"entry",key:a.id},[s("td",J,[y?(e(),c(g,{key:0},[V(h(y),1)],64)):U("",!0)]),s("td",K,[o(d,{to:`/contest/${n.value.id}/problem/${a.id}`,class:"problem-title"},{default:i(()=>[V(h(a.title["en-US"]),1)]),_:2},1032,["to"])]),s("td",Q,[s("span",W,h(a.countCorrect)+" / "+h(a.countTotal),1),s("div",X,[s("div",{class:"acceptance-bar",style:j({width:`${a.countTotal?100*a.countCorrect/a.countTotal:0}%`})},null,4)])])]))),128))])])):(e(),c(g,{key:1},[f.value?P((e(),c("div",Y,null,512)),[[p,!0]]):(e(),v(u(E),{key:1,description:"暂无试题"}))],64))}}}),te=R(ee,[["__scopeId","data-v-9566f8d0"]]),se={};function ne(b,t){return e(),c("div")}const ae=R(se,[["render",ne]]),oe={key:0,style:{height:"200px"}},re=T({__name:"ViewContestDetail",props:{cid_str:{}},setup(b){const t=$(),n=z(),r=m(()=>t.currentContest);m(()=>t.currentRanking);const f=m(()=>t.loading);F();const k=x("overview"),_=parseInt(b.cid_str),l=(d,p)=>{d.paneName==="ranking"&&(p.preventDefault(),n.push(`/contest/${r.value.id}/ranklist`))};return S(()=>{t.enter(_)}),(d,p)=>{const a=D("el-empty"),y=N("loading");return e(),v(I,null,{main:i(()=>[o(u(q),null,{default:i(()=>[r.value?(e(),v(u(M),{key:0,modelValue:k.value,"onUpdate:modelValue":p[0]||(p[0]=B=>k.value=B),class:"contest-tabs",onTabClick:l},{default:i(()=>[o(u(C),{label:"比赛详情",name:"overview"},{default:i(()=>[o(G)]),_:1}),o(u(C),{label:"题目列表",name:"problems"},{default:i(()=>[o(te)]),_:1}),o(u(C),{label:"我的提交",name:"submissions"},{default:i(()=>[o(ae)]),_:1}),o(u(C),{label:"排行榜",name:"ranking"})]),_:1},8,["modelValue"])):(e(),c(g,{key:1},[f.value?P((e(),c("div",oe,null,512)),[[y,!0]]):(e(),v(a,{key:1,description:"暂无数据"}))],64))]),_:1})]),sidebar:i(()=>[o(Z)]),_:1})}}});export{re as default};

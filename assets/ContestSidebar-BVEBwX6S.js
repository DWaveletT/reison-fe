import{m as E}from"./markdown-CFCF6NjP.js";import{d as $,r as g,Z as L,e as s,p as n,R as j,c as T,T as N,S as R,aA as V,j as b,k as r,b as c,E as H,w as i,F as x,f as u,ad as I,t as k,aB as P,aC as z,v as y,l as D,L as F,O as A,$ as O,_ as U}from"./index-Dqx7opL-.js";const Z=["innerHTML"],ne=$({__name:"MdRender",props:{content:{}},setup(h){const o=g(""),a=h;return L(()=>{E(a.content).then(e=>{o.value=e})}),(e,d)=>(n(),s("div",{class:"markdown-wrap",innerHTML:o.value},null,8,Z))}}),q={key:0,class:"contest-sidebar"},G={class:"contest-info"},J={class:"contest-time"},K={key:0},Q={key:1},W={class:"problem-badges"},X=["onClick"],Y=$({__name:"ContestSidebar",setup(h){const o=A(),a=j(),e=T(()=>a.currentContest),d=T(()=>a.currentRanking),l=g(0),m=g(1);function _(){e.value&&(l.value=Math.max(0,e.value.endTime.getTime()-Date.now()),m.value=e.value.endTime.getTime()-e.value.startTime.getTime())}N(e,_);function B(v){if(!d.value)return"";for(const t of d.value.results)if(t.problem==v)switch(t.judge){case"correct":return"status-success";case"incorrect":return"status-danger";default:return"status-warning"}return""}function M(v,t){e.value&&o.push(`/contest/${e.value.id}/${t}`)}function S(){a.exit(),o.push("/contest")}let C;return R(()=>{_(),C=window.setInterval(_,1e3)}),V(()=>{clearInterval(C)}),(v,t)=>{const p=I("router-link");return e.value?(n(),s("div",q,[r(c(H),null,{default:i(()=>[e.value?(n(),s(x,{key:0},[u("div",G,[r(p,{to:`/contest/${e.value.id}`},{default:i(()=>[u("h3",null,k(e.value.title),1)]),_:1},8,["to"]),u("div",J,[r(c(P),{percentage:100*(m.value-l.value)/m.value,"stroke-width":15,striped:"","show-text":!1},null,8,["percentage"]),u("div",null,[l.value>0?(n(),s("span",K,"剩余时间 "+k(c(z)(l.value)),1)):(n(),s("span",Q,"比赛已结束")),r(p,{class:"link-ranklist",to:`/contest/${e.value.id}/ranklist`},{default:i(()=>t[0]||(t[0]=[y(" 排行榜 ")])),_:1},8,["to"])])])]),u("div",W,[(n(!0),s(x,null,D(e.value.problems,(w,f)=>(n(),s("div",{key:f,class:O(["problem-badge",B(w)]),onClick:ee=>M(w,f)},k(f),11,X))),128))])],64)):b("",!0)]),_:1}),r(c(F),{type:"primary",onClick:S},{default:i(()=>t[1]||(t[1]=[y("退出比赛模式")])),_:1})])):b("",!0)}}}),oe=U(Y,[["__scopeId","data-v-c59456e9"]]);export{oe as C,ne as _};

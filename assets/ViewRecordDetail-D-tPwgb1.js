import{d as D,B as S,r as b,c as d,j as i,u as s,U as L,n,F as V,V as C,l as h,b as e,W as P,t as o,E as B,k as A,w,G as F,i as g,X as j,Y as y,Z as q,q as $,e as T,m as I,a as l,$ as z,_ as N,N as M,a0 as R,f as G,L as W,a1 as X,P as Y,a2 as Z,S as H,T as J}from"./index-CtpyuxIm.js";const K={class:"submission-detail-main"},O={key:0,class:"compile-info"},Q={class:"compile-message"},x={class:"testcase-container"},ee=["onClick"],se={class:"testcase-id"},te={class:"testcase-verdict"},ae={class:"testcase-meta"},oe={key:0},le={key:1},ie={class:"code-container"},ne={class:"code-meta"},de={class:"code-content"},re={key:0,style:{height:"300px"}},ce={key:0,class:"testcase-detail"},ue={class:"details"},pe={class:"testcase-data"},me={class:"testcase-data"},ve={class:"testcase-data"},_e=D({__name:"RecordMain",props:{record:{},loading:{type:Boolean}},setup(f){const{verdicts:_,langs:v}=S().config,m=b("testcases"),p=b(!1),a=b(null),t=b(0);function k(r,c){a.value=r,t.value=c,p.value=!0}return(r,c)=>{const U=I("loading");return l(),d("div",K,[i(s(L),{modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=u=>m.value=u),class:"detail-tabs"},{default:n(()=>[r.record?(l(),d(V,{key:0},[i(s(C),{label:"编译信息",name:"compile"},{default:n(()=>[r.record.compile?(l(),d("div",O,[i(s(P),{type:r.record.verdict==="CE"?"error":"success",title:r.record.verdict==="CE"?"编译错误":"编译成功",closable:!1},null,8,["type","title"]),e("pre",Q,o(r.record.compile.message),1)])):(l(),h(s(B),{key:1,description:"暂无编译信息"}))]),_:1}),i(s(C),{label:"测试点",name:"testcases"},{default:n(()=>[e("div",x,[(l(!0),d(V,null,A(r.record.detail,(u,E)=>(l(),d("div",{key:E,class:"testcase-item"},[e("div",{class:"testcase-badge",style:z({backgroundColor:`${s(_)[u.verdict].color}`}),onClick:je=>k(u,E)},[e("span",se,"#"+o(E+1),1),e("span",te,o(s(_)[u.verdict].abbr),1),e("span",ae,[u.time?(l(),d("span",oe,o(u.time)+"ms",1)):g("",!0),u.memory?(l(),d("span",le,o(s(T)(u.memory)),1)):g("",!0)])],12,ee)]))),128))])]),_:1}),i(s(C),{label:"代码",name:"code"},{default:n(()=>[e("div",ie,[e("div",ne,[e("span",null,"语言: "+o(s(v)[r.record.lang].description),1),e("span",null,"代码长度: "+o(r.record.length)+" bytes",1)]),e("pre",de,[e("code",null,o(r.record.code),1)])])]),_:1})],64)):(l(),d(V,{key:1},[r.loading?w((l(),d("div",re,null,512)),[[U,!0]]):(l(),h(s(B),{key:1,description:"未查询到记录"}))],64))]),_:1},8,["modelValue"]),i(s(F),{modelValue:p.value,"onUpdate:modelValue":c[1]||(c[1]=u=>p.value=u),title:`测试点 #${t.value+1} 详情`,width:"800"},{default:n(()=>[a.value?(l(),d("div",ce,[i(s(j),{column:4,border:""},{default:n(()=>[i(s(y),{label:"状态"},{default:n(()=>[i(q,{verdict:a.value.verdict},null,8,["verdict"])]),_:1}),i(s(y),{label:"用时"},{default:n(()=>[$(o(a.value.time)+"ms",1)]),_:1}),i(s(y),{label:"内存"},{default:n(()=>[$(o(s(T)(a.value.memory)),1)]),_:1}),a.value.score!==void 0?(l(),h(s(y),{key:0,label:"得分"},{default:n(()=>[$(o(a.value.score)+"分 ",1)]),_:1})):g("",!0)]),_:1}),e("div",ue,[c[2]||(c[2]=e("h3",null,"输入摘要",-1)),e("pre",pe,o(a.value.input),1),c[3]||(c[3]=e("h3",null,"输出摘要",-1)),e("pre",me,o(a.value.output),1),c[4]||(c[4]=e("h3",null,"校验信息",-1)),e("pre",ve,o(a.value.checker),1)])])):g("",!0)]),_:1},8,["modelValue","title"])])}}}),be=N(_e,[["__scopeId","data-v-849f17d1"]]),fe={class:"panel-container"},ge={key:0,class:"description-list"},ye={class:"description-item"},he={class:"item-value"},$e={class:"description-item"},ke={class:"item-value"},Ee={class:"description-item"},Ve={class:"item-value"},Ce={class:"description-item"},Te={class:"item-value"},De={class:"description-item"},Be={class:"item-value"},Re={class:"description-item"},Se={class:"item-value"},we={class:"description-item"},Ie={class:"item-value"},Ne={class:"description-item"},Me={class:"item-value"},Ue={class:"description-item"},Le={class:"item-value"},Pe={key:1,style:{height:"288px"}},Ae=D({__name:"RecordSidebar",props:{record:{},loading:{type:Boolean}},setup(f){const{langs:_}=S().config,v=X(),m=()=>{p.record&&v.push(`/problem/${p.record.problem}`)},p=f;return(a,t)=>{const k=I("loading");return l(),d("div",fe,[i(s(M),null,{default:n(()=>[t[9]||(t[9]=e("h3",null,"评测详情",-1)),a.record?(l(),d("div",ge,[e("div",ye,[t[0]||(t[0]=e("span",{class:"item-label"},"编号",-1)),e("span",he,o(a.record.id),1)]),e("div",$e,[t[1]||(t[1]=e("span",{class:"item-label"},"提交用户",-1)),e("span",ke,o(a.record.user.name),1)]),e("div",Ee,[t[2]||(t[2]=e("span",{class:"item-label"},"关联试题",-1)),e("span",Ve,o(a.record.problem.i18n["en-US"].title),1)]),e("div",Ce,[t[3]||(t[3]=e("span",{class:"item-label"},"提交时间",-1)),e("span",Te,o(s(R)(a.record.submission)),1)]),e("div",De,[t[4]||(t[4]=e("span",{class:"item-label"},"评测时间",-1)),e("span",Be,o(s(R)(a.record.evaluation)),1)]),e("div",Re,[t[5]||(t[5]=e("span",{class:"item-label"},"最终用时",-1)),e("span",Se,o(s(G)(a.record.time)),1)]),e("div",we,[t[6]||(t[6]=e("span",{class:"item-label"},"评测空间",-1)),e("span",Ie,o(s(T)(a.record.memory)),1)]),e("div",Ne,[t[7]||(t[7]=e("span",{class:"item-label"},"代码长度",-1)),e("span",Me,o(a.record.length),1)]),e("div",Ue,[t[8]||(t[8]=e("span",{class:"item-label"},"评测语言",-1)),e("span",Le,o(s(_)[a.record.lang].description),1)])])):w((l(),d("div",Pe,null,512)),[[k,a.loading]])]),_:1}),i(s(W),{type:"primary",onClick:m,disabled:!a.record},{default:n(()=>t[10]||(t[10]=[$(" 查看试题 ")])),_:1},8,["disabled"])])}}}),Fe=N(Ae,[["__scopeId","data-v-1287b04b"]]),ze=D({__name:"ViewRecordDetail",props:{rid:{}},setup(f){const _=f,v=b(null),m=b(!0);return Y(()=>{Z({id:parseInt(_.rid)}).then(p=>{v.value=p.record}).finally(()=>{m.value=!1})}),(p,a)=>(l(),h(H,null,{main:n(()=>[i(s(M),null,{default:n(()=>[i(be,{record:v.value,loading:m.value},null,8,["record","loading"])]),_:1})]),sidebar:n(()=>[i(s(J),{offset:16},{default:n(()=>[i(Fe,{record:v.value,loading:m.value},null,8,["record","loading"])]),_:1})]),_:1}))}});export{ze as default};

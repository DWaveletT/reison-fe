import{d as T,c as g,P as $,l as m,e as u,E,o as e,r as x,O as S,a as c,b as t,F as h,k as O,w as P,ae as R,a3 as D,m as N,i as U,q as V,t as k,j as a,n as i,Z as j,_ as B,R as F,T as I,U as C,M,a0 as q}from"./index-m04lDvHM.js";import{_ as z,C as Z}from"./ContestSidebar-BCG0vccA.js";const A=T({__name:"ContestOverview",setup(f){const o=g(()=>$().currentContest);return(s,r)=>o.value?(e(),m(z,{key:0,content:o.value.description},null,8,["content"])):(e(),m(u(E),{key:1,description:"比赛不存在"}))}}),G={key:0,class:"problemset"},H={class:"label"},J={class:"title"},K={class:"acceptance"},Q={class:"accept-number"},W={class:"acceptance-bar-container"},X={key:0,style:{height:"200px"}},Y=T({__name:"ContestProblems",setup(f){const o=$(),s=g(()=>o.currentContest),r=x([]),v=x(!1);function b(){s.value&&(v.value=!0,r.value=[],R({contest:s.value.id}).then(_=>{for(const l of _.problems)r.value.push({problem:l,label:w(l.id)})}).finally(()=>{v.value=!1}))}function w(_){if(!s.value)return null;const l=Object.keys(s.value.problems);for(const d of l)if(s.value.problems[d]===_)return d;return null}return S(()=>{b()}),(_,l)=>{const d=D("router-link"),p=N("loading");return s.value&&r.value.length>0?(e(),c("table",G,[l[0]||(l[0]=t("colgroup",null,[t("col",{class:"col-label"}),t("col",{class:"col-title"}),t("col",{class:"col-acceptance"})],-1)),t("tbody",null,[(e(!0),c(h,null,O(r.value,({problem:n,label:y})=>(e(),c("tr",{class:"entry",key:n.id},[t("td",H,[y?(e(),c(h,{key:0},[V(k(y),1)],64)):U("",!0)]),t("td",J,[a(d,{to:`/contest/${s.value.id}/problem/${n.id}`,class:"problem-title"},{default:i(()=>[V(k(n.title["en-US"]),1)]),_:2},1032,["to"])]),t("td",K,[t("span",Q,k(n.countCorrect)+" / "+k(n.countTotal),1),t("div",W,[t("div",{class:"acceptance-bar",style:j({width:`${n.countTotal?100*n.countCorrect/n.countTotal:0}%`})},null,4)])])]))),128))])])):(e(),c(h,{key:1},[v.value?P((e(),c("div",X,null,512)),[[p,!0]]):(e(),m(u(E),{key:1,description:"暂无试题"}))],64))}}}),ee=B(Y,[["__scopeId","data-v-75770468"]]),te={};function se(f,o){return e(),c("div")}const ne=B(te,[["render",se]]),ae={key:0,style:{height:"200px"}},ce=T({__name:"ViewContestDetail",props:{cid_str:{}},setup(f){const o=$(),s=q(),r=g(()=>o.currentContest),v=g(()=>o.loading),b=x("overview"),_=parseInt(f.cid_str),l=(d,p)=>{d.paneName==="ranking"&&(p.preventDefault(),s.push(`/contest/${r.value.id}/ranklist`))};return S(()=>{o.enter(_)}),(d,p)=>{const n=D("el-empty"),y=N("loading");return e(),m(F,null,{main:i(()=>[a(u(M),null,{default:i(()=>[r.value?(e(),m(u(I),{key:0,modelValue:b.value,"onUpdate:modelValue":p[0]||(p[0]=L=>b.value=L),class:"contest-tabs",onTabClick:l},{default:i(()=>[a(u(C),{label:"比赛详情",name:"overview"},{default:i(()=>[a(A)]),_:1}),a(u(C),{label:"题目列表",name:"problems"},{default:i(()=>[a(ee)]),_:1}),a(u(C),{label:"我的提交",name:"submissions"},{default:i(()=>[a(ne)]),_:1}),a(u(C),{label:"排行榜",name:"ranking"})]),_:1},8,["modelValue"])):(e(),c(h,{key:1},[v.value?P((e(),c("div",ae,null,512)),[[y,!0]]):(e(),m(n,{key:1,description:"暂无数据"}))],64))]),_:1})]),sidebar:i(()=>[a(Z)]),_:1})}}});export{ce as default};

import{ap as M,d as T,a as b,i as e,e as l,N,q as s,ad as E,v as m,p as d,_ as C,r as y,A,s as U,b as t,L as V,F as P,m as q,aq as L,t as x,j as D,P as G,H as S,I as v,K as w,ar as F,as as R,at as I,au as j,c as H,R as J,n as $,ag as K,l as O,an as Q,ah as z,ai as k}from"./index-Byva4vat.js";const W=async c=>(await M.post("/user",c,{})).data,X={class:"practice-tab"},Y=T({__name:"TabPractice",props:{user:{}},setup(c){return(i,n)=>{const u=E("el-empty");return d(),b("div",X,[e(l(N),{class:"section"},{header:s(()=>n[0]||(n[0]=[m(" 参加的比赛 ")])),default:s(()=>[e(u,{description:"暂无比赛数据"})]),_:1})])}}}),B=C(Y,[["__scopeId","data-v-3bdb2350"]]),Z={class:"problem-tab"},h={class:"panel-header"},ee={class:"problemset"},le={class:"id"},ae={class:"problem"},se={class:"edit"},te={class:"panel-header"},oe=T({__name:"TabProblem",props:{user:{}},setup(c){const i=y(1),n=y(0),u=[];return(_,o)=>{const g=E("router-link"),f=E("el-card"),r=E("el-empty");return d(),b("div",Z,[e(l(A),{gutter:20},{default:s(()=>[e(l(U),{md:12,sm:24},{default:s(()=>[e(f,{class:"panel"},{default:s(()=>[t("div",h,[o[2]||(o[2]=t("h3",null,"我创建的题目",-1)),e(l(V),{type:"primary",size:"small"},{default:s(()=>o[1]||(o[1]=[m("新建题目")])),_:1})]),t("table",ee,[o[5]||(o[5]=t("colgroup",null,[t("col",{class:"col-id"}),t("col",{class:"col-title"}),t("col",{class:"col-submit"}),t("col",{class:"col-status"}),t("col",{class:"col-edit"})],-1)),t("tbody",null,[(d(),b(P,null,q(u,a=>t("tr",{class:"entry",key:a.id},[t("td",le,x(a.id),1),t("td",ae,[e(g,{to:`/problem/${a.id}`,class:"problem-title"},{default:s(()=>[m(x(a.title["en-US"]),1)]),_:2},1032,["to"])]),o[3]||(o[3]=t("td",{class:"submit"},"10.1k 提交",-1)),o[4]||(o[4]=t("td",{class:"status"},"公开",-1)),t("td",se,[e(l(D),{icon:l(G)},null,8,["icon"])])])),64))])]),e(l(L),{"current-page":i.value,"onUpdate:currentPage":o[0]||(o[0]=a=>i.value=a),"page-size":20,total:n.value},null,8,["current-page","total"])]),_:1})]),_:1}),e(l(U),{md:12,sm:24},{default:s(()=>[e(f,{class:"panel"},{default:s(()=>[t("div",te,[o[7]||(o[7]=t("h3",null,"我创建的比赛",-1)),e(l(V),{type:"primary",size:"small"},{default:s(()=>o[6]||(o[6]=[m("新建比赛")])),_:1})]),e(r,{description:"暂无比赛数据"})]),_:1})]),_:1})]),_:1})])}}}),ue=C(oe,[["__scopeId","data-v-80ce3c52"]]),ne={class:"settings-tab"},re=T({__name:"TabSettings",props:{user:{}},setup(c){const i=c,n=y({username:i.user.name,email:"user@example.com"}),u=y({current:"",new:"",confirm:""}),_=y(i.user.avatar);function o(){I.success("设置已保存")}function g(){I.success("密码已修改")}function f(r){_.value=r.url,I.success("头像上传成功")}return(r,a)=>(d(),b("div",ne,[e(l(N),null,{default:s(()=>[e(l(A),{gutter:48},{default:s(()=>[e(l(U),{span:12,class:"safety"},{default:s(()=>[a[8]||(a[8]=t("h3",null,"账号设置",-1)),e(l(S),{"label-width":"80px"},{default:s(()=>[e(l(v),{label:"用户名"},{default:s(()=>[e(l(w),{modelValue:n.value.username,"onUpdate:modelValue":a[0]||(a[0]=p=>n.value.username=p)},null,8,["modelValue"])]),_:1}),e(l(v),{label:"电子邮箱"},{default:s(()=>[e(l(w),{modelValue:n.value.email,"onUpdate:modelValue":a[1]||(a[1]=p=>n.value.email=p)},null,8,["modelValue"]),e(l(V),{size:"small",type:"text"},{default:s(()=>a[5]||(a[5]=[m("验证邮箱")])),_:1})]),_:1}),e(l(v),null,{default:s(()=>[e(l(V),{type:"primary",onClick:o},{default:s(()=>a[6]||(a[6]=[m("保存更改")])),_:1})]),_:1})]),_:1}),a[9]||(a[9]=t("h3",null,"密码安全",-1)),e(l(S),{"label-width":"80px"},{default:s(()=>[e(l(v),{label:"当前密码"},{default:s(()=>[e(l(w),{modelValue:u.value.current,"onUpdate:modelValue":a[2]||(a[2]=p=>u.value.current=p),type:"password"},null,8,["modelValue"])]),_:1}),e(l(v),{label:"新密码"},{default:s(()=>[e(l(w),{modelValue:u.value.new,"onUpdate:modelValue":a[3]||(a[3]=p=>u.value.new=p),type:"password"},null,8,["modelValue"])]),_:1}),e(l(v),{label:"确认密码"},{default:s(()=>[e(l(w),{modelValue:u.value.confirm,"onUpdate:modelValue":a[4]||(a[4]=p=>u.value.confirm=p),type:"password"},null,8,["modelValue"])]),_:1}),e(l(v),null,{default:s(()=>[e(l(V),{type:"primary",onClick:g},{default:s(()=>a[7]||(a[7]=[m("修改密码")])),_:1})]),_:1})]),_:1})]),_:1}),e(l(U),{span:12,class:"avatar-upload"},{default:s(()=>[e(l(F),{size:150,src:_.value},null,8,["src"]),e(l(R),{action:"/api/upload/avatar","show-file-list":!1,"on-success":f},{default:s(()=>[e(l(V),{type:"primary"},{default:s(()=>a[10]||(a[10]=[m("上传新头像")])),_:1})]),_:1}),a[11]||(a[11]=t("p",{class:"tip"},"支持 JPG/PNG 格式，大小不超过 2MB",-1))]),_:1})]),_:1})]),_:1})]))}}),de=C(re,[["__scopeId","data-v-b54b4ccd"]]),ie={class:"user-profile"},pe={class:"user-header"},me={class:"user-meta"},ce=T({__name:"ViewUser",props:{uid_str:{}},setup(c){const i=c,n=j().currentUser,u=y(null),_=i.uid_str?parseInt(i.uid_str):(n==null?void 0:n.id)||0,o=y("practice"),g=H(()=>(n==null?void 0:n.id)===_);return J(()=>{W({user:_}).then(f=>{u.value=f.user})}),(f,r)=>(d(),$(K,null,{default:s(()=>[t("div",ie,[u.value?(d(),b(P,{key:0},[l(_)===0?(d(),b(P,{key:0},[m(" 尚未登录。 ")],64)):(d(),b(P,{key:1},[t("div",pe,[e(l(F),{size:120,src:u.value.avatar},null,8,["src"]),t("h1",null,x(u.value.name),1),t("div",me,[t("span",null,"注册于 "+x(l(Q)(u.value.register)),1),r[2]||(r[2]=t("span",null,"解决 100 道题目",-1))])]),g.value?(d(),$(l(z),{key:0,modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=a=>o.value=a),class:"profile-tabs"},{default:s(()=>[e(l(k),{label:"练习",name:"practice"},{default:s(()=>[e(B,{user:u.value},null,8,["user"])]),_:1}),e(l(k),{label:"题库",name:"problems"},{default:s(()=>[e(ue,{user:u.value},null,8,["user"])]),_:1}),e(l(k),{label:"设置",name:"settings"},{default:s(()=>[e(de,{user:u.value},null,8,["user"])]),_:1})]),_:1},8,["modelValue"])):(d(),$(l(z),{key:1,modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=a=>o.value=a),class:"profile-tabs"},{default:s(()=>[e(l(k),{label:"练习",name:"practice"},{default:s(()=>[e(B,{user:u.value},null,8,["user"])]),_:1})]),_:1},8,["modelValue"]))],64))],64)):O("",!0)])]),_:1}))}}),fe=C(ce,[["__scopeId","data-v-b2e1d8b5"]]);export{fe as default};

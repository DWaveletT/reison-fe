import{d as $,c as g,S as w,n as m,e as u,E as V,p as e,r as x,R as E,a as c,b as t,F as C,m as O,w as N,ax as R,ad as D,o as P,l as U,v as T,t as k,i as a,q as i,a1 as F,_ as B,U as I,ah as j,ai as h,N as q,O as z}from"./index-Byva4vat.js";import{_ as M,C as A}from"./ContestSidebar-CmxZCaXy.js";import"./markdown-C84M3WeR.js";const G=$({__name:"ContestOverview",setup(f){const o=g(()=>w().currentContest);return(s,r)=>o.value?(e(),m(M,{key:0,content:o.value.description},null,8,["content"])):(e(),m(u(V),{key:1,description:"比赛不存在"}))}}),H={key:0,class:"problemset"},J={class:"label"},K={class:"title"},Q={class:"acceptance"},W={class:"accept-number"},X={class:"acceptance-bar-container"},Y={key:0,style:{height:"200px"}},Z=$({__name:"ContestProblems",setup(f){const o=w(),s=g(()=>o.currentContest),r=x([]),v=x(!1);function b(){s.value&&(v.value=!0,r.value=[],R({contest:s.value.id}).then(_=>{for(const l of _.problems)r.value.push({problem:l,label:S(l.id)})}).finally(()=>{v.value=!1}))}function S(_){if(!s.value)return null;const l=Object.keys(s.value.problems);for(const d of l)if(s.value.problems[d]===_)return d;return null}return E(()=>{b()}),(_,l)=>{const d=D("router-link"),p=P("loading");return s.value&&r.value.length>0?(e(),c("table",H,[l[0]||(l[0]=t("colgroup",null,[t("col",{class:"col-label"}),t("col",{class:"col-title"}),t("col",{class:"col-acceptance"})],-1)),t("tbody",null,[(e(!0),c(C,null,O(r.value,({problem:n,label:y})=>(e(),c("tr",{class:"entry",key:n.id},[t("td",J,[y?(e(),c(C,{key:0},[T(k(y),1)],64)):U("",!0)]),t("td",K,[a(d,{to:`/contest/${s.value.id}/problem/${n.id}`,class:"problem-title"},{default:i(()=>[T(k(n.title["en-US"]),1)]),_:2},1032,["to"])]),t("td",Q,[t("span",W,k(n.countCorrect)+" / "+k(n.countTotal),1),t("div",X,[t("div",{class:"acceptance-bar",style:F({width:`${n.countTotal?100*n.countCorrect/n.countTotal:0}%`})},null,4)])])]))),128))])])):(e(),c(C,{key:1},[v.value?N((e(),c("div",Y,null,512)),[[p,!0]]):(e(),m(u(V),{key:1,description:"暂无试题"}))],64))}}}),ee=B(Z,[["__scopeId","data-v-75770468"]]),te={};function se(f,o){return e(),c("div")}const ne=B(te,[["render",se]]),ae={key:0,style:{height:"200px"}},re=$({__name:"ViewContestDetail",props:{cid_str:{}},setup(f){const o=w(),s=z(),r=g(()=>o.currentContest),v=g(()=>o.loading),b=x("overview"),_=parseInt(f.cid_str),l=(d,p)=>{d.paneName==="ranking"&&(p.preventDefault(),s.push(`/contest/${r.value.id}/ranklist`))};return E(()=>{o.enter(_)}),(d,p)=>{const n=D("el-empty"),y=P("loading");return e(),m(I,null,{main:i(()=>[a(u(q),null,{default:i(()=>[r.value?(e(),m(u(j),{key:0,modelValue:b.value,"onUpdate:modelValue":p[0]||(p[0]=L=>b.value=L),class:"contest-tabs",onTabClick:l},{default:i(()=>[a(u(h),{label:"比赛详情",name:"overview"},{default:i(()=>[a(G)]),_:1}),a(u(h),{label:"题目列表",name:"problems"},{default:i(()=>[a(ee)]),_:1}),a(u(h),{label:"我的提交",name:"submissions"},{default:i(()=>[a(ne)]),_:1}),a(u(h),{label:"排行榜",name:"ranking"})]),_:1},8,["modelValue"])):(e(),c(C,{key:1},[v.value?N((e(),c("div",ae,null,512)),[[y,!0]]):(e(),m(n,{key:1,description:"暂无数据"}))],64))]),_:1})]),sidebar:i(()=>[a(A)]),_:1})}}});export{re as default};
